[build]
builder = "NIXPACKS"
buildCommand = "pip install -r requirements.txt"

[deploy]
startCommand = "python manage.py migrate --noinput && gunicorn config.wsgi:application"
healthcheckPath = "/api/health/"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[env]
# Railway auto-injects DATABASE_URL from PostgreSQL addon
# Set these via Railway CLI or dashboard:
# - DJANGO_SETTINGS_MODULE=config.settings
# - SECRET_KEY=<your-secret-key>
# - DEBUG=False
# - ALLOWED_HOSTS=.railway.app
# - CORS_ALLOWED_ORIGINS=https://your-frontend-app.com
# 
# Note: Redis is NO LONGER needed - simplified to Django-only architecture!
